<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>unprocessed refactoredData</div>
</body>

</html>
<script>



    function cleanedUnProcessData(data, props) {

        let subjectNatures = [...new Set(data[0].markData.termWiseSubjectResponse[0].subjectMarksEntryRequests.map(subject => subject.subjectNature))];

        // Function to clean markData and categorize by subjectNature
        function cleanMarkData(markData, subjectNatureProps) {
            const mainKeys = ['admissionNo', 'studentName', 'className', 'fatherName', 'academicSession', 'termWiseSubjectResponse'];

            // Clean main data
            let cleanedMarkData = {};
            for (let key of mainKeys) {
                cleanedMarkData[key] = markData[key] || null;
            }

            // Process term-wise subject responses
            cleanedMarkData.termWiseSubjectResponse = markData.termWiseSubjectResponse.map(term => {
                const categorizedSubjects = {};
                const childSubjects = [];
                const subChildSubjects = [];

                // Initialize categories for each subjectNature in props
                subjectNatureProps?.forEach(nature => {
                    categorizedSubjects[nature] = [];
                });

                term.subjectMarksEntryRequests.forEach(subject => {
                    if (subject.parent.length === 0) {
                        // Categorize subjects based on dynamic subjectNature from props
                        const subjectNature = subject.subjectNature.toLowerCase();
                        const matchedCategory = subjectNatureProps.find(nature => nature.toLowerCase() === subjectNature);

                        if (matchedCategory) {
                            categorizedSubjects[matchedCategory].push(subject);
                        } else {
                            // If the subject doesn't match any provided category, add it to "others"
                            if (!categorizedSubjects.others) {
                                categorizedSubjects.others = [];
                            }
                            categorizedSubjects.others.push(subject);
                        }
                    } else if (subject.parent.length === 1) {
                        childSubjects.push(subject); // Child subjects
                    } else if (subject.parent.length > 1) {
                        subChildSubjects.push(subject); // Sub-child subjects
                    }
                });

                // Build hierarchical structure for subjects
                const organizedSubjects = Object.values(categorizedSubjects).flat().map(mainSubject => {
                    // Find child subjects that have this main subject as their parent
                    const children = childSubjects.filter(child => child.parent.includes(mainSubject.subjectName));

                    // For each child, find sub-child subjects that have this child as their parent
                    const childrenWithSubChildren = children.map(child => {
                        const subChildren = subChildSubjects.filter(subChild => subChild.parent.includes(child.subjectName));
                        return {
                            ...child,
                            subChildren: subChildren // Attach sub-children to the child subject
                        };
                    });

                    // Return the main subject with its children and sub-children nested
                    return {
                        ...mainSubject,
                        children: childrenWithSubChildren
                    };
                });

                return {
                    totalMarks: term.totalMarks,
                    totalObtained: term.totalObtained,
                    overAllGrade: term.overAllGrade,
                    totalPercentage: term.totalPercentage,
                    termName: term.termName,
                    subjects: {
                        categorizedSubjects, // Categorized subjects
                        organizedSubjects // Hierarchical structure including children and sub-children
                    }
                };
            });

            return cleanedMarkData;
        }

        // Function to clean and process student data
        function cleanStudentData(student) {
            function buildFullAddress(info) {
                let addressParts = [];
                if (info.area && info.area !== "NA") addressParts.push(info.area);
                if (info.landmark && info.landmark !== "NA") addressParts.push(info.landmark);
                if (info.city && info.city !== "NA") addressParts.push(info.city);
                if (info.state && info.state !== "NA") addressParts.push(info.state);
                if (info.pincode && info.pincode !== "NA") addressParts.push(info.pincode);
                return addressParts.length ? addressParts.join(", ") : "";
            }

            const studentInfo = student?.studentInfoResponse?.[0] || {};

            return {
                studentName: student.studentName,
                className: student.className,
                sectionName: student.sectionName,
                classAndSection: `${student.className}-${student.sectionName}`,
                rollNo: student.rollNo,
                fatherName: student.fatherName,
                motherName: student.motherName,
                dob: student.dob,
                attendance: student.attendance
                    ? {
                        presentDay: +student.attendance.split("/")[0],
                        totalDay: +student.attendance.split("/")[1],
                        attendancePercentage: parseFloat(
                            (+student.attendance.split("/")[0] / +student.attendance.split("/")[1]) * 100
                        ).toFixed(2),
                        attendanceRow: student.attendance,
                    }
                    : {},
                admissionNo: student.admissionNo,
                gender: studentInfo.gender || "",
                houses: studentInfo.houses || "",
                mobileNumber: studentInfo.mobileNumber || "",
                fatherMobile: studentInfo.fatherMobile || "",
                height: studentInfo.height || "",
                weight: studentInfo.weight || "",
                bloodGroup: studentInfo.bloodGroup || "",
                classTeacher: student.classTeacher || "",

                address: {
                    area: studentInfo.area || "",
                    city: studentInfo.city || "",
                    pincode: studentInfo.pincode || "",
                    landmark: studentInfo.landmark || "",
                    state: studentInfo.state || "",
                },
                fullAddress: buildFullAddress(studentInfo),
            };
        }

        function cleanTeacherRemarks(remark) {
            return remark;
        }

        // Function to fetch extra fields
        function fetchExtraFields(hallData, props) {
            const extraFields = {};
            // Only include fields specified in props
            props?.forEach(key => {
                if (hallData[key] !== undefined) {
                    extraFields[key] = hallData[key];
                }
            });

            return extraFields;
        }

        // Process each data item in the list
        const cleanedDataList = data.map((data) => {
            const cleanedStudentData = cleanStudentData(data?.student);
            const cleanStudentMarkData = cleanMarkData(data?.markData, subjectNatures); // Pass subjectNatures to the function
            const cleanedTeacherRemarks = cleanTeacherRemarks(data?.remarks);
            const extraFields = fetchExtraFields(data?.markData, props); // Fetch specific extra fields

            return {
                header: data?.header || '',
                studentInfo: cleanedStudentData,
                markData: cleanStudentMarkData,
                remarks: cleanedTeacherRemarks,
                extraFields: extraFields // Include only the extra fields specified
            };
        });

        return cleanedDataList;
    }

    // Example usage



    const studentData = [
        {
            student: {
                dob: "11-02-2019",
                admissionNo: "7378",
                studentName: "Eklavya Jadwani",
                className: "PRE SCHOOL",
                sectionName: "A",
                rollNo: 1,
                fatherName: "Mohit Jadwani",
                motherName: "Sonal Jadwani",
                attendance: "0.0/0",
                boardRollNumber: "",
                studentInfoResponse: [
                    {
                        id: 173828,
                        userUid: "50daa25a-76e1-4d08-a583-fa2598dcc67e",
                        userName: null,
                        fatherUserName: null,
                        motherUserName: null,
                        guardianUserName: null,
                        uid: "a5270f7a-27da-47ae-b993-ec7f9e40ba90",
                        studentId: "7378",
                        studentName: "Eklavya Jadwani",
                        fatherName: "Mohit Jadwani",
                        motherName: "Sonal Jadwani",
                        dob: "11-02-2019",
                        gender: "Male",
                        studentAdhaarcard: "665567651279",
                        joiningClass: "PRE SCHOOL",
                        joiningSections: "A",
                        joiningDate: "04-01-2023",
                        plotNumber: "",
                        area: "Shalimar Bagh",
                        city: "Delhi",
                        state: "Delhi",
                        pincode: "110088",
                        phone1: null,
                        rollNo: 1,
                        emergencyNumber: "",
                        mobileNumber: "9910201369",
                        studentEmail: null,
                        religion: "",
                        category: "",
                        minority: "No",
                        motherTongue: "",
                        idMark: "",
                        height: "",
                        weight: "",
                        physicalDisability: "",
                        bloodGroup: "O+",
                        healthRemark: "",
                        siblingDetails: "",
                        alumni: "",
                        siblingResponse: [],
                        fatherOccupation: "",
                        fatherQualification: "",
                        fatherOrganization: "Abce",
                        fatherDesignation: "",
                        fatherIncome: "",
                        fatherArea: "NA",
                        fatherCity: "NA",
                        fatherState: "NA",
                        fatherPincode: "111111",
                        fatherPhone: null,
                        fatherMobile: "9910201369",
                        fatherEmail: null,
                        fatherAdhaarNumber: "556473647875",
                        schoolUid: "ec75582e-5242-4251-b822-aeff70640797",
                        motherQualification: "",
                        motherOccupation: "",
                        motherOrganization: "Abce",
                        motherDesignation: "",
                        motherIncome: "",
                        motherArea: "NA",
                        motherCity: "NA",
                        motherState: "NA",
                        motherPincode: "111111",
                        motherPhone: null,
                        motherMobile: "9910201369",
                        motherEmail: null,
                        motherAdhaarNumber: "657483551325",
                        guardianName: null,
                        relation: null,
                        guardianOccupation: null,
                        guardianPhone: null,
                        guardianMobile: null,
                        guardianEmail: null,
                        guardianAddress: null,
                        leavingDate: null,
                        previousSchoolName: null,
                        otp: "L1PNK2",
                        schoolName: "Demo Public School",
                        remark: null,
                        classes: "PRE SCHOOL",
                        classUid: null,
                        sections: "A",
                        group: null,
                        wing: "Senior",
                        status: "Studying",
                        academicSession: "2023-2024",
                        joiningStatus: "New",
                        houses: null,
                        certificates: "",
                        certificatesList: [],
                        caste: "",
                        listOfDocuments: null,
                        attached: false,
                        required: false,
                        submitted: false,
                        studentHostel: [],
                        studentConcession: [],
                        studentTransport: [],
                        studentAadharCard: null,
                        fatherAadharCard: null,
                        motherAadharCard: null,
                        studentImage: null,
                        fatherImage: null,
                        motherImage: null,
                        guardianImage: null,
                        birthCertificate: null,
                        aluminiProof: null,
                        siblingProof: null,
                        residenceProof: null,
                        firstBornChildProof: null,
                        medicalFitnessCertificate: null,
                        fatherQualificationProof: null,
                        motherQualificationProof: null,
                        casteCertificate: null,
                        createdUser: "indian1234",
                        editedUser: "indian1234",
                        createddate: "2023-09-13 12:22:53.630549",
                        editeddate: "2023-09-13 12:22:53.630549",
                        studentAddressResponse: {
                            uid: "a9718e32-236a-4c98-9124-cffe0f632433",
                            houseNo: null,
                            area: "Shalimar Bagh",
                            landmark: null,
                            city: "Delhi",
                            district: null,
                            state: "Delhi",
                            poPs: null,
                            pincode: 110088,
                            street: "Cb-8c",
                            userName: "DIPST279_7378",
                            createdDate: "13-09-2023 05:52 PM",
                            editedDate: "13-09-2023 05:52 PM",
                            createdBy: "indian1234",
                            editedBy: "indian1234",
                        },
                        fatherAddressResponse: {
                            uid: "20ae31b3-e520-484b-97fc-1459ab77fdb4",
                            houseNo: null,
                            area: "NA",
                            landmark: null,
                            city: "NA",
                            district: null,
                            state: "NA",
                            poPs: null,
                            pincode: 111111,
                            street: null,
                            userName: "DIPST279_F7378",
                            createdDate: "13-09-2023 05:52 PM",
                            editedDate: "13-09-2023 05:52 PM",
                            createdBy: "indian1234",
                            editedBy: "indian1234",
                        },
                        motherAddressResponse: {
                            uid: "18942f19-b7e9-486a-a3f8-b2accf956ca2",
                            houseNo: null,
                            area: "NA",
                            landmark: null,
                            city: "NA",
                            district: null,
                            state: "NA",
                            poPs: null,
                            pincode: 111111,
                            street: null,
                            userName: "DIPST279_M7378",
                            createdDate: "13-09-2023 05:52 PM",
                            editedDate: "13-09-2023 05:52 PM",
                            createdBy: "indian1234",
                            editedBy: "indian1234",
                        },
                        guardianAddressResponse: null,
                        correspondenceAddressResponse: null,
                    },
                ],
            },
            markData: {
                "admissionNo": "20220031",
                "permanentEducationNumber": "",
                "studentName": "Angel",
                "className": "I",
                "sectionName": "A",
                "classSectionUid": "02599a13-15fb-47b9-8bdf-571a3c856c6d",
                "academicSession": "2024-2025",
                "fatherName": "Vikas Bhardwaj",
                "uid": "9fdc304c-a22c-456e-a23e-40d7a9044381",
                "attendanceResponse": null,
                "pass": false,
                "rollNo": 0,
                "termWiseSubjectResponse": [
                    {
                        "totalMarks": 4700,
                        "totalObtained": 2059.7400000000002,
                        "overAllGrade": "C2",
                        "totalPercentage": 43.82425531914894,
                        "termName": "CYCLE I",
                        "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                        "pass": true,
                        "subjectMarksEntryRequests": [
                            {
                                "marks": 100,
                                "description": "",
                                "status": "",
                                "subject": "4098c6f9-a43c-49bd-9464-9c30595c6bad",
                                "subjectName": "ENGLISH",
                                "scholastic": true,
                                "max": 100,
                                "priority": 1,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [],
                                "grade": "A1",
                                "percentage": 100,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 90.99,
                                "description": "",
                                "status": "",
                                "subject": "bf4353a5-2ce3-4c57-b8e2-ca88c48b55cf",
                                "subjectName": "READING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 2,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENGLISH"
                                ],
                                "grade": "A2",
                                "percentage": 90.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 80.99,
                                "description": "",
                                "status": "",
                                "subject": "a19bce9e-c1f0-41c0-bf73-06f2bb3ba758",
                                "subjectName": "Pronunciation and Fluency",
                                "scholastic": true,
                                "max": 100,
                                "priority": 3,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "READING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "B1",
                                "percentage": 80.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 70.99,
                                "description": "",
                                "status": "",
                                "subject": "52924be7-6829-4611-ad04-ea1f49535f94",
                                "subjectName": "Comprehension",
                                "scholastic": true,
                                "max": 100,
                                "priority": 4,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "READING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "B2",
                                "percentage": 70.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "f14285be-3908-482e-af32-df2c58b783bf",
                                "subjectName": "WRITING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 5,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENGLISH"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 50.99,
                                "description": "",
                                "status": "",
                                "subject": "6dd41b24-d089-4179-9722-f0d6822cc646",
                                "subjectName": "Spellings and Vocabulary",
                                "scholastic": true,
                                "max": 100,
                                "priority": 6,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "C2",
                                "percentage": 50.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 40.99,
                                "description": "",
                                "status": "",
                                "subject": "e903cb68-b44b-4570-836d-8fab8d897eff",
                                "subjectName": "Handwriting",
                                "scholastic": true,
                                "max": 100,
                                "priority": 7,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "D",
                                "percentage": 40.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 32.99,
                                "description": "",
                                "status": "",
                                "subject": "6979a242-1846-43f9-964e-67df839f8ff5",
                                "subjectName": "Unit I",
                                "scholastic": true,
                                "max": 100,
                                "priority": 8,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "E",
                                "percentage": 32.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Absent",
                                "subject": "187ef110-eab5-4b03-9000-560aba59769a",
                                "subjectName": "Unit II",
                                "scholastic": true,
                                "max": 100,
                                "priority": 9,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Medical",
                                "subject": "3c9539ca-ff69-46d6-b1b1-597b2a60e0f6",
                                "subjectName": "SPEAKING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 10,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENGLISH"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Sports",
                                "subject": "df62b7d9-76c6-4d20-9658-0e5f91d898e0",
                                "subjectName": "Conversation",
                                "scholastic": true,
                                "max": 100,
                                "priority": 11,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "SPEAKING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Leave",
                                "subject": "59102af4-37c2-417c-87e6-1df875cafcd0",
                                "subjectName": "Recitation",
                                "scholastic": true,
                                "max": 100,
                                "priority": 12,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "SPEAKING SKILLS",
                                    "ENGLISH"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Late Admission",
                                "subject": "30dad93c-4119-4bd8-9a24-883548997836",
                                "subjectName": "LISTENING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 13,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENGLISH"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 90.99,
                                "description": "",
                                "status": "",
                                "subject": "833b18f6-5ec6-4f69-94b8-705889cd32ba",
                                "subjectName": "HINDI",
                                "scholastic": true,
                                "max": 100,
                                "priority": 14,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [],
                                "grade": "A2",
                                "percentage": 90.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 70.99,
                                "description": "",
                                "status": "",
                                "subject": "7aa6dced-4045-451e-ae64-611837d6d9d0",
                                "subjectName": "READING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 15,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "HINDI"
                                ],
                                "grade": "B2",
                                "percentage": 70.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "28293cf8-3f2b-4a76-a5cb-68b3a05aef71",
                                "subjectName": "Pronunciation and Fluency",
                                "scholastic": true,
                                "max": 100,
                                "priority": 16,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "READING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "d4ea80d9-28ec-4550-a588-c3c1ad1105ee",
                                "subjectName": "Comprehension",
                                "scholastic": true,
                                "max": 100,
                                "priority": 17,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "READING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 70.99,
                                "description": "",
                                "status": "",
                                "subject": "71e1cd3b-33cc-40df-940d-2e7feb14bdc0",
                                "subjectName": "WRITING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 18,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "HINDI"
                                ],
                                "grade": "B2",
                                "percentage": 70.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "c383c113-06c0-46af-a029-6a79e2dc41f2",
                                "subjectName": "Spellings and Vocabulary",
                                "scholastic": true,
                                "max": 100,
                                "priority": 19,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Medical",
                                "subject": "a0d62b85-135e-4102-89a7-b050f9831521",
                                "subjectName": "Handwriting",
                                "scholastic": true,
                                "max": 100,
                                "priority": 20,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Medical",
                                "subject": "dce7a013-acf2-403d-81b3-18c005e173d9",
                                "subjectName": "Unit I",
                                "scholastic": true,
                                "max": 100,
                                "priority": 21,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Leave",
                                "subject": "91d01f38-20f8-4e22-994c-e71ffda8a45e",
                                "subjectName": "Unit II",
                                "scholastic": true,
                                "max": 100,
                                "priority": 22,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "WRITING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Medical",
                                "subject": "885b29f5-25b9-4bd4-ac78-6006f228f198",
                                "subjectName": "SPEAKING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 23,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Absent",
                                "subject": "5052153c-ab38-40cc-93c5-0291b9eb79d2",
                                "subjectName": "Conversation",
                                "scholastic": true,
                                "max": 100,
                                "priority": 24,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "SPEAKING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Late Admission",
                                "subject": "6da3741f-51a1-47ea-a942-087ea8136e7e",
                                "subjectName": "Recitation",
                                "scholastic": true,
                                "max": 100,
                                "priority": 25,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "SPEAKING SKILLS",
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Sports",
                                "subject": "991e64bc-ec80-4662-9c05-05e6329236da",
                                "subjectName": "LISTENING SKILLS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 26,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "HINDI"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 100,
                                "description": "",
                                "status": "",
                                "subject": "cf076e8d-4a29-4717-b941-649391477355",
                                "subjectName": "MATHEMATICS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 27,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [],
                                "grade": "A1",
                                "percentage": 100,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 90.99,
                                "description": "",
                                "status": "",
                                "subject": "985e5ad5-5a78-4e85-9c00-eaa5aef2c267",
                                "subjectName": "Activity",
                                "scholastic": true,
                                "max": 100,
                                "priority": 28,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "MATHEMATICS"
                                ],
                                "grade": "A2",
                                "percentage": 90.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "a245e951-f28b-404e-98d4-85099ecbab75",
                                "subjectName": "Mental Maths",
                                "scholastic": true,
                                "max": 100,
                                "priority": 29,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "MATHEMATICS"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "fd2d8777-e8b1-4aa4-9cf3-9fd8ed009e6c",
                                "subjectName": "Unit I",
                                "scholastic": true,
                                "max": 100,
                                "priority": 30,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "MATHEMATICS"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 60.99,
                                "description": "",
                                "status": "",
                                "subject": "2de8155a-fcd0-4395-a76a-15259dde5b44",
                                "subjectName": "Unit II",
                                "scholastic": true,
                                "max": 100,
                                "priority": 31,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "MATHEMATICS"
                                ],
                                "grade": "C1",
                                "percentage": 60.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 100,
                                "description": "",
                                "status": "",
                                "subject": "e7a97b81-820b-447d-abe3-2342423aa6b2",
                                "subjectName": "ENVIRONMENTAL SCIENCE",
                                "scholastic": true,
                                "max": 100,
                                "priority": 32,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [],
                                "grade": "A1",
                                "percentage": 100,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 80.99,
                                "description": "",
                                "status": "",
                                "subject": "6ffeb319-4df8-4610-af9e-5bcfbff7c408",
                                "subjectName": "Activity Project",
                                "scholastic": true,
                                "max": 100,
                                "priority": 33,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENVIRONMENTAL SCIENCE"
                                ],
                                "grade": "B1",
                                "percentage": 80.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 40.99,
                                "description": "",
                                "status": "",
                                "subject": "037a2755-6777-4c47-84aa-ca6dafdc703d",
                                "subjectName": "Group Discussion",
                                "scholastic": true,
                                "max": 100,
                                "priority": 34,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENVIRONMENTAL SCIENCE"
                                ],
                                "grade": "D",
                                "percentage": 40.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 40.99,
                                "description": "",
                                "status": "",
                                "subject": "b96c4913-0945-43c9-aa0f-f53060eac52a",
                                "subjectName": "Unit I",
                                "scholastic": true,
                                "max": 100,
                                "priority": 35,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENVIRONMENTAL SCIENCE"
                                ],
                                "grade": "D",
                                "percentage": 40.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 80.99,
                                "description": "",
                                "status": "",
                                "subject": "9189607e-0256-4abd-9274-671eb64aae4d",
                                "subjectName": "Unit II",
                                "scholastic": true,
                                "max": 100,
                                "priority": 36,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "Theory",
                                "parent": [
                                    "ENVIRONMENTAL SCIENCE"
                                ],
                                "grade": "B1",
                                "percentage": 80.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 70.99,
                                "description": "",
                                "status": "",
                                "subject": "727045f1-63de-4dee-9fbd-8fe85bf11cf9",
                                "subjectName": "ASPECTS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 37,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [],
                                "grade": "B2",
                                "percentage": 70.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Absent",
                                "subject": "69a4b869-c1e4-4c76-9aa8-ffff01c6b447",
                                "subjectName": "COMPUTER SCIENCE",
                                "scholastic": true,
                                "max": 100,
                                "priority": 38,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Medical",
                                "subject": "49f053a1-2aff-422c-8587-06f1c41d1064",
                                "subjectName": "SPORTS",
                                "scholastic": true,
                                "max": 100,
                                "priority": 39,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Leave",
                                "subject": "358b87df-d7a2-4b72-8abe-3ab0de1287b0",
                                "subjectName": "Team Spirit",
                                "scholastic": true,
                                "max": 100,
                                "priority": 40,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [
                                    "SPORTS"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Sports",
                                "subject": "c3301ab7-8a04-40d2-8d63-3f6aa0c2c257",
                                "subjectName": "Talent",
                                "scholastic": true,
                                "max": 100,
                                "priority": 41,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [
                                    "SPORTS"
                                ],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 0,
                                "description": "",
                                "status": "Leave",
                                "subject": "e218b7af-97ba-4ef9-8e9c-5eddc3287d61",
                                "subjectName": "ART and CARFT",
                                "scholastic": true,
                                "max": 100,
                                "priority": 42,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [],
                                "grade": "E",
                                "percentage": 0,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 70.99,
                                "description": "",
                                "status": "",
                                "subject": "c4941b50-41a3-445d-a9dc-9ff5e8b11fd9",
                                "subjectName": "Skill",
                                "scholastic": true,
                                "max": 100,
                                "priority": 43,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [
                                    "ART and CARFT"
                                ],
                                "grade": "B2",
                                "percentage": 70.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 70.99,
                                "description": "",
                                "status": "",
                                "subject": "b9acb9bc-5d0d-405d-af7d-f381c58ac4ca",
                                "subjectName": "Creativity",
                                "scholastic": true,
                                "max": 100,
                                "priority": 44,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [
                                    "ART and CARFT"
                                ],
                                "grade": "B2",
                                "percentage": 70.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 100,
                                "description": "",
                                "status": "",
                                "subject": "20c36ae3-1dc9-442f-8f25-fd7d45cc14b1",
                                "subjectName": "MUSIC and DANCE",
                                "scholastic": true,
                                "max": 100,
                                "priority": 45,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [],
                                "grade": "A1",
                                "percentage": 100,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 32.99,
                                "description": "",
                                "status": "",
                                "subject": "bb3a32e0-3a68-4ef8-88f3-36817ea690a4",
                                "subjectName": "Melody",
                                "scholastic": true,
                                "max": 100,
                                "priority": 46,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [
                                    "MUSIC and DANCE"
                                ],
                                "grade": "E",
                                "percentage": 32.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            },
                            {
                                "marks": 50.99,
                                "description": "",
                                "status": "",
                                "subject": "a251e1cc-e260-46c4-ae49-4a4c27b0e648",
                                "subjectName": "Rhythm",
                                "scholastic": true,
                                "max": 100,
                                "priority": 47,
                                "min": 0,
                                "attachmentName": null,
                                "subjectNature": "1B Scholastic",
                                "parent": [
                                    "MUSIC and DANCE"
                                ],
                                "grade": "C2",
                                "percentage": 50.99,
                                "term": "CYCLE I",
                                "termUid": "dc64678e-81cc-4069-84db-a962ad62fc07",
                                "pass": true,
                                "gradePattern": "USA 8 POINT",
                                "graded": true
                            }
                        ]
                    }
                ]
            },

            remarks: {
                uid: "fa3a28f8-c86e-44cf-8ef2-3813828282ac",
                terms: ["CYCLE-I"],
                studentId: "14969",
                studentName: "Riyana Jain",
                rollNumber: 31,
                classSectionUid: "7f87ecc2-8816-41b1-b656-477e5adc2e75",
                classSection: "I-A",
                description: "VERY GOOD",
                fields: [
                    {
                        uid: "ab81dd33-bc35-4475-994b-b736da7abad3",
                        title: "SPECIFIC PARTICIPATION",
                        type: "OPEN",
                        value: "HI HELLO HOW ARE YOU",
                        masterUid: "bec87a47-09db-457b-a095-0f90a5c49a62",
                        masterName: "SPECIFIC PARTICIPATION",
                    },
                    {
                        uid: "87abd191-f913-421e-8606-1619006ae3ce",
                        title: "Session Date",
                        type: "ALPHA_NUMERIC",
                        value: "",
                        masterUid: "d6bdde3b-5399-4edb-88c3-f4bbb1bfa6ec",
                        masterName: "NEW SESSION BEGINS ON",
                    },
                    {
                        uid: "0b5777e4-291c-4bcf-a503-d5a4560f5343",
                        title: "TEACHER REMARK",
                        type: "ALPHABETS_WITH_SPECIAL",
                        value: "",
                        masterUid: "59de457f-192d-43ae-96b4-23d323467b74",
                        masterName: "REMARKS",
                    },
                    {
                        uid: "34cc79e5-9cc1-4e98-a0a9-ff6309e6b95a",
                        title: "TOTAL ATTENDANCE",
                        type: "NUMERIC",
                        value: "120",
                        masterUid: "46a05041-392f-4825-aa64-bd5b6dd4ca05",
                        masterName: "ATTENDANCE",
                    },
                ],
                status: true,
                createdUser: "QuickCampus",
                editedUser: "QuickCampus",
                createdDate: "31-01-2024 01:03 PM",
                editedDate: "31-01-2024 01:03 PM",
            },
            header: `<div>
                <table style="width:100%;" cellspacing="0" cellpadding="0">
                                        <tbody>
                                            <tr>
                                                <td valign="middle" align="left" style="width:10%; padding-top:0mm; padding-bottom:0mm;">
                                                    &nbsp;
                                                </td>
                                                <td align="middle" style="width:80%; padding-top:0mm; padding-bottom:0mm;">
                                                    <span style="font-size:10pt; text-transform:uppercase; padding-top:0mm; padding-bottom:0mm; ">SHREE JI WORLD SCHOOL</span>
                                                    <br>
                                                    <span style="width:80%; padding-top:0mm; padding-bottom:0mm; font-size:10pt; text-transform:uppercase; ">GURUDWARA LANE, JAIN COLONY, NANESH ENCLAVE,PREHLADPUR, KHERA, OPP. SECTOR 30, ROHINI, DELHI-110042</span>
                                                </td>
                                               
                                            </tr>
                                        </tbody>
                                    </table>

         </div>`,
        },]


    // Example usage
    const cleanStudentData = cleanedUnProcessData(studentData
        // Define keys for extra fields
    );

    console.log(cleanStudentData, "ffffffffffffffffff cleanStudentData")
    console.log(studentData, "ffffffffffffff studentData")



</script>